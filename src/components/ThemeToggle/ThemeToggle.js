import React, { useContext, useRef } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { ThemeContext } from '../ThemeContext/ThemeContext';
import { Styled } from './ThemeToggle.styles';

const ThemeToggle = () => {
	const { colorMode, setColorMode } = useContext(ThemeContext);
	const themeButton = useRef();

	if (!colorMode) return null;
	return (
		<Styled.ThemeToggleButton
			type="button"
			ref={themeButton}
			onClick={() => {
				if (colorMode === 'dark') setColorMode('light');
				else setColorMode('dark');
				if (themeButton && themeButton.current) themeButton.current.blur();
			}}
			title={colorMode && colorMode === 'dark' ? 'Toggle light theme' : 'Toggle dark theme'}
		>
			<Styled.ThemeToggle $colorMode={colorMode}
				width="512px"
				height="512px"
				viewBox="0 0 512 512"
				xmlns="http://www.w3.org/2000/svg">
				<title>{colorMode && colorMode === 'dark' ? 'Toggle light mode' : 'Toggle dark mode'}</title>
				<desc>Created with Sketch.</desc>
				<g id="Page-1"
					stroke="none"
					strokeWidth="1"
					fill="none"
					fillRule="evenodd">
					<g id="idea">
						<path
							d="M288,512 L224,512 C209.066667,512 192,499.2 192,473.6 L192,428.8 C192,407.466667 181.333333,388.266667 164.266667,373.333333 C125.866667,343.466667 106.666667,300.8 106.666667,253.866667 C108.8,172.8 174.933333,108.8 253.866667,106.666667 C294.4,106.666667 332.8,121.6 360.533333,149.333333 C388.266667,177.066667 405.333333,215.466667 405.333333,256 C405.333333,300.8 386.133333,343.466667 349.866667,371.2 C330.666667,386.133333 320,409.6 320,430.933333 L320,480 C320,497.066667 305.066667,512 288,512 Z M256,128 C187.733333,128 130.133333,185.6 128,253.866667 C128,294.4 145.066667,332.8 177.066667,356.266667 C200.533333,375.466667 213.333333,401.066667 213.333333,428.8 L213.333333,473.6 C213.333333,477.866667 213.333333,490.666667 224,490.666667 L288,490.666667 C294.4,490.666667 298.666667,486.4 298.666667,480 L298.666667,430.933333 C298.666667,403.2 313.6,373.333333 337.066667,354.133333 C366.933333,330.666667 384,294.4 384,256 C384,221.866667 371.2,189.866667 345.6,164.266667 C322.133333,140.8 290.133333,128 256,128 Z"
							id="Shape"
							fill={colorMode && colorMode === 'dark' ? '#ffffff' : '#000000'}
							fillRule="nonzero"
						/>
						<AnimatePresence>
							{colorMode && colorMode !== 'dark' && (
								<motion.path
									d="M260.799609,426.666667 C274.44065,426.666667 286.21845,430.299096 298.583315,426.666667 C299.113829,426.510818 299.889281,418.229771 301.612137,408.869653 C301.634922,408.745865 301.659411,408.65 301.709444,408.510879 C301.785497,408.299401 301.859739,408.007678 301.928129,407.768317 C302.328399,406.367415 303.024151,404.49456 303.494667,402.608591 C303.509201,402.550335 303.551516,402.494054 303.576474,402.435583 C303.664439,402.229503 303.776056,402.020609 303.811208,401.817767 C303.865137,401.506571 304.083773,401.146101 304.138779,400.835159 C304.154475,400.746432 304.141564,400.823763 304.179504,400.728729 C304.278866,400.479846 304.423582,400.12185 304.487345,399.892807 C304.573671,399.582719 304.724487,399.29238 304.821777,398.998306 C304.919574,398.7027 305.051574,398.418654 305.148804,398.146408 C305.276367,397.789227 305.427681,397.456156 305.536911,397.155746 C305.659266,396.819239 305.808979,396.522382 305.886795,396.28273 C305.956521,396.067994 306.182455,395.634099 306.21909,395.518105 C306.318016,395.204882 306.46778,394.932529 306.588684,394.655975 C306.864267,394.025611 307.137615,393.453377 307.369171,392.895035 C307.702316,392.091736 307.43515,392.71725 307.475998,392.645645 C307.55701,392.503634 307.55671,392.438014 307.584137,392.403824 C307.669573,392.297319 307.838229,391.917527 307.874261,391.836989 C308.170065,391.175809 308.574966,390.38652 308.742661,390.007416 C308.910355,389.628311 308.792928,389.849014 308.803543,389.834755 C308.830585,389.798432 308.847761,389.733226 308.872162,389.694534 C308.940312,389.586473 308.991874,389.455904 309.062143,389.335853 C309.250842,389.013469 309.411416,388.623616 309.530941,388.386071 C309.731313,387.987852 309.985374,387.509803 310.05833,387.380069 C310.131287,387.250336 310.168559,387.193526 310.239609,387.063736 C310.271455,387.00556 310.30402,386.868767 310.354542,386.810682 C310.600447,386.527967 310.957443,385.67746 311.288376,385.109497 C311.619308,384.541534 311.717192,384.37493 311.835707,384.165671 C311.954222,383.956412 317.232396,375.482122 320.01815,371.797477 C320.286705,371.442265 320.530558,371.193257 320.753735,370.860712 C320.905322,370.63484 320.777121,370.76544 320.822655,370.751242 C320.834709,370.747483 321.113649,370.408477 321.153421,370.384689 C321.351174,370.266408 321.342847,370.363919 321.579439,370.140994 C323.100513,368.707784 325.311138,365.393359 326.756807,363.816516 C327.072871,363.471775 327.367392,363.172547 327.616112,362.905572 C327.697345,362.818376 327.71452,362.803228 327.784592,362.721664 C327.807392,362.695125 327.843624,362.660965 327.87735,362.625061 C327.900379,362.600545 327.921062,362.570455 327.94014,362.560181 C328.100277,362.473938 328.155481,362.373602 328.326385,362.166443 C328.376898,362.105214 328.507307,361.986703 328.594849,361.886505 C328.627978,361.848586 328.652317,361.827334 328.670563,361.814957 C328.687401,361.803534 328.703944,361.767579 328.721268,361.755286 C329.409716,361.266763 330.457718,360.087729 331.285661,359.240551 C331.482804,359.038827 331.706031,358.864065 331.859654,358.69956 C331.931868,358.62223 331.960456,358.585604 332.034017,358.532904 C332.082108,358.498451 332.132457,358.425096 332.180499,358.390578 C363.989762,335.53532 385,298.36851 385,256.5 C385,185.53141 327.46859,128 256.5,128 C185.53141,128 128,185.53141 128,256.5 C128,299.940065 148.48223,336.849397 181.434693,360.008439 C181.567223,360.101581 181.696897,360.242511 181.822947,360.358846 C182.261099,360.763232 182.608905,361.320624 183.149026,361.617501 C183.184074,361.636765 183.269338,361.7131 183.31271,361.755286 C183.621226,362.055354 184.136817,362.716475 184.423558,362.779168 C184.733572,362.84695 184.946881,363.327771 185.182178,363.483125 C185.616642,363.769976 185.488836,363.430051 185.937784,364.272945 C186.329312,365.008033 187.377592,365.723713 187.69833,366.111752 C188.333893,366.880677 188.709521,367.307026 189.474476,368.174462 C189.761754,368.500226 190.344064,368.962877 190.582715,369.297514 C190.951788,369.815029 191.502942,370.44167 191.919577,370.974031 C192.728036,372.007053 193.727209,373.06193 194.475187,374.126496 C198.191918,379.416374 204.620952,389.63176 208.418929,400.168609 C209.707807,403.744386 210.67558,407.826588 211.606524,411.253179 C211.679751,411.522712 211.740806,412.102394 211.812899,412.363412 C211.848179,412.491146 211.848817,412.5926 211.870031,412.714054 C211.94562,413.146814 211.982264,413.569098 212.104546,413.984107 C212.11653,414.024779 212.167187,414.37299 212.169263,414.40809 C212.17403,414.488686 212.206789,414.588633 212.218808,414.681711 C212.254308,414.956639 212.31746,415.289859 212.366469,415.691884 C212.514969,416.910034 212.777094,419.633066 213.11928,421.87483 C213.231181,422.607933 213.199603,424.736758 213.308413,425.336887 C213.496182,426.372511 213.143378,426.361127 213.308413,426.666667 C214.243694,428.398215 217.97216,426.265307 219.434527,426.666667 C230.291196,429.646378 248.996783,426.666667 260.799609,426.666667 Z"
									id="Oval"
									fill="#FCD772"
									initial={{ opacity: 0 }}
									animate={{ opacity: 1 }}
									exit={{ opacity: 0 }}
								/>
							)}
						</AnimatePresence>
						<path
							d="M309.333333,448 L202.666667,448 C196.266667,448 192,443.733333 192,437.333333 C192,430.933333 196.266667,426.666667 202.666667,426.666667 L309.333333,426.666667 C315.733333,426.666667 320,430.933333 320,437.333333 C320,443.733333 315.733333,448 309.333333,448 Z"
							id="Path"
							fill={colorMode && colorMode === 'dark' ? '#ffffff' : '#000000'}
							fillRule="nonzero"
						/>
						<path
							d="M309.333333,478.333333 L202.666667,478.333333 C196.266667,478.333333 192,474.066667 192,467.666667 C192,461.266667 196.266667,457 202.666667,457 L309.333333,457 C315.733333,457 320,461.266667 320,467.666667 C320,474.066667 315.733333,478.333333 309.333333,478.333333 Z"
							id="Path-Copy"
							fill={colorMode && colorMode === 'dark' ? '#ffffff' : '#000000'}
							fillRule="nonzero"
						/>
						<path
							d="M341.333333,266.666667 C334.933333,266.666667 330.666667,262.4 330.666667,256 C330.666667,215.466667 296.533333,181.333333 256,181.333333 C249.6,181.333333 245.333333,177.066667 245.333333,170.666667 C245.333333,164.266667 249.6,160 256,160 C309.333333,160 352,202.666667 352,256 C352,262.4 347.733333,266.666667 341.333333,266.666667 Z"
							id="Path"
							fill={colorMode && colorMode === 'dark' ? '#ffffff' : '#000000'}
							fillRule="nonzero"
						/>
						<path
							d="M185.889828,231 C190.584248,231 184.847544,208.160239 184.847544,179.993716 C184.847544,151.827194 190.584248,129 185.889828,129 C181.195407,129 171,154.386101 171,182.552623 C171,210.719145 181.195407,231 185.889828,231 Z"
							id="Oval"
							fill={colorMode && colorMode === 'dark' ? '#ffffff' : '#FFEAA7'}
							transform="translate(179.368260, 180.000000) rotate(45.000000) translate(-179.368260, -180.000000) "
						/>
						<path
							d="M333.889828,377 C338.584248,377 332.847544,354.160239 332.847544,325.993716 C332.847544,297.827194 338.584248,275 333.889828,275 C329.195407,275 319,300.386101 319,328.552623 C319,356.719145 329.195407,377 333.889828,377 Z"
							id="Oval-Copy"
							fill={colorMode && colorMode === 'dark' ? '#ffffff' : '#DFB326'}
							transform="translate(327.368260, 326.000000) scale(-1, -1) rotate(45.000000) translate(-327.368260, -326.000000) "
						/>
						<AnimatePresence>
							{colorMode && colorMode !== 'dark' && (
								<motion.g id="lines"
									initial={{ opacity: 0 }}
									animate={{ opacity: 1 }}
									exit={{ opacity: 0 }}>
									<path
										d="M256,64 C249.6,64 245.333333,59.7333333 245.333333,53.3333333 L245.333333,10.6666667 C245.333333,4.26666667 249.6,0 256,0 C262.4,0 266.666667,4.26666667 266.666667,10.6666667 L266.666667,53.3333333 C266.666667,59.7333333 262.4,64 256,64 Z"
										id="Path"
										fill="#000000"
										fillRule="nonzero"
									/>
									<path
										d="M398.933333,123.733333 C396.8,123.733333 392.533333,123.733333 390.4,121.6 C386.133333,117.333333 386.133333,110.933333 390.4,106.666667 L420.266667,76.8 C424.533333,72.5333333 430.933333,72.5333333 435.2,76.8 C439.466667,81.0666667 439.466667,87.4666667 435.2,91.7333333 L405.333333,121.6 C405.333333,121.6 401.066667,123.733333 398.933333,123.733333 L398.933333,123.733333 Z"
										id="Path"
										fill="#000000"
										fillRule="nonzero"
									/>
									<path
										d="M501.333333,266.666667 L458.666667,266.666667 C452.266667,266.666667 448,262.4 448,256 C448,249.6 452.266667,245.333333 458.666667,245.333333 L501.333333,245.333333 C507.733333,245.333333 512,249.6 512,256 C512,262.4 507.733333,266.666667 501.333333,266.666667 Z"
										id="Path"
										fill="#000000"
										fillRule="nonzero"
									/>
									<path
										d="M53.3333333,266.666667 L10.6666667,266.666667 C4.26666667,266.666667 0,262.4 0,256 C0,249.6 4.26666667,245.333333 10.6666667,245.333333 L53.3333333,245.333333 C59.7333333,245.333333 64,249.6 64,256 C64,262.4 59.7333333,266.666667 53.3333333,266.666667 Z"
										id="Path"
										fill="#000000"
										fillRule="nonzero"
									/>
									<path
										d="M113.066667,123.733333 C110.933333,123.733333 106.666667,123.733333 104.533333,121.6 L74.6666667,89.6 C70.4,85.3333333 70.4,78.9333333 74.6666667,74.6666667 C78.9333333,70.4 85.3333333,70.4 89.6,74.6666667 L119.466667,104.533333 C123.733333,108.8 123.733333,115.2 119.466667,119.466667 C117.333333,121.6 115.2,123.733333 113.066667,123.733333 L113.066667,123.733333 Z"
										id="Path"
										fill="#000000"
										fillRule="nonzero"
									/>
								</motion.g>
							)}
						</AnimatePresence>
					</g>
				</g>
			</Styled.ThemeToggle>
		</Styled.ThemeToggleButton>
	);
};

export default ThemeToggle;
